"use strict";(self.webpackChunk_kne_components_react_enum=self.webpackChunk_kne_components_react_enum||[]).push([[830],{71830:(e,a,r)=>{r.r(a),r.d(a,{Enum:()=>R,EnumResource:()=>G,default:()=>M,preset:()=>N,useEnum:()=>$,useEnumLoader:()=>P,useEnumResource:()=>C});var t=r(94922),n=r.n(t),o=r(74946),u=r(78678),l=r(16052),s=r.n(l),c=r(12097),m=r.n(c),i=r(34598),f=r.n(i),d=r(9211),g=r.n(d),y=r(58554),p=r(64755),h=r.n(p);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},b.apply(null,arguments)}function v(e,a){if(null==e)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.includes(t))continue;r[t]=e[t]}return r}const A={base:{},cache:{max:100}};let O=new y.q(A.cache);const N=e=>{h()(A,e),O=new y.q(A.cache)},q=()=>O,w=["moduleName","children","format"],j=["moduleName","name","format","force","children"],E=["data"],_=["request","children"],k=["data"],x=e=>{let{value:a,format:r,language:t,locale:n}=e;var o;const u=(null==(o=a.translation)?void 0:o[t||n])||a.description;return"origin"===r?a:"option"===r?Object.assign({},a,{label:u}):u},C=()=>{const{locale:e,language:a}=(0,o.useGlobalContext)(),{enums:r}=(0,o.usePreset)();return(0,u.A)((async t=>{let{moduleNames:n}=t;return await Promise.all(n.map((async t=>{const n=Object.assign({},A.base,r)[t];if(!n)return console.warn(`\u679a\u4e3e[${t}]\u7684loader\u6ca1\u6709\u88ab\u6b63\u786e\u8bbe\u7f6e`),null;const o=await("function"===typeof n?n({target:t,locale:e,language:a}):n);if(Array.isArray(o))return new Map(o.map((e=>[e.value.toString(),e])));if(o instanceof Map)return o;throw new Error("\u83b7\u53d6\u5230\u7684resource\u7c7b\u578b\u4e0d\u6b63\u786e\uff0c\u4ec5\u652f\u6301Array\u6216Map")})))}))},P=()=>{const{language:e,locale:a}=(0,o.useGlobalContext)(),r=C();return(0,u.A)((async t=>{let{requests:n,format:o}=t;const u=q(),l=e=>Symbol.for(`${e.moduleName}_${e.value}_${e.format||o}`),s=m()(n,(e=>!e.force&&u.has(l(e))?"cached":"uncached")),c=s.uncached||[],i=s.cached||[],d=[],y=f()(c.map((e=>{let{moduleName:a}=e;return a}))),p=g()(await r({moduleNames:y}),((e,a,r)=>{e[y[r]]=a}),{});return i.forEach((e=>{const a=u.get(l(e)),r=n.indexOf(e);d[r]=a})),c.forEach((r=>{const t=(r=>{if(u.has(l(r)))return u.get(l(r));const t=p[r.moduleName].get(r.value),n=x({value:t,format:r.format||o,language:e,locale:a});return u.set(l(r),n),n})(r),s=n.indexOf(r);d[s]=t})),d}))},$=()=>{const e=P();return(0,l.useFetch)({loader:a=>{let{data:r}=a;const{requests:t,format:n}=Object.assign({},{format:"default"},r);return e({requests:t,format:n})}})},G=e=>{const a=Object.assign({},{format:"origin"},e),{moduleName:r,children:t,format:u}=a,l=v(a,w),c=C(),{language:m,locale:i}=(0,o.useGlobalContext)();return n().createElement(s(),b({},l,{data:{moduleName:r},loader:e=>{let{data:a}=e;const{moduleName:r}=Object.assign({},a);return c({moduleNames:Array.isArray(r)?r:[r]})},render:e=>{let{data:a}=e;return"function"===typeof t?t(Array.isArray(r)?a.map((e=>Array.from(e.values()).map((e=>x({value:e,format:u,language:m,locale:i}))))):Array.from(a[0].values()).map((e=>x({value:e,format:u,language:m,locale:i})))):t}}))},M=e=>{const a=Object.assign({},{force:!1},e),{moduleName:r,name:t,format:o,force:u,children:l}=a,c=v(a,j),m=P();return t?n().createElement(s(),b({},c,{loader:e=>{let{data:a}=e;const{requests:r,format:t}=Object.assign({},a);return m({requests:r,format:t})},data:{requests:[{moduleName:r,value:t,force:u,format:"function"===typeof l?"origin":o||"default"}]},render:e=>{let{data:a}=e,t=v(e,E);return"function"===typeof l?l(Array.isArray(r)?a:a[0],t):l||a}})):n().createElement(G,{moduleName:r,format:o||"origin"},l)},R=e=>{const a=Object.assign({},{format:"default"},e),{request:r,children:t}=a,o=v(a,_),u=P();return n().createElement(s(),b({},o,{loader:e=>{let{data:a}=e;const{requests:r,format:t}=Object.assign({},a);return u({requests:r,format:t})},data:{requests:Array.isArray(r)?r:[r]},render:e=>{let{data:a}=e,n=v(e,k);return"function"===typeof t?t(Array.isArray(r)?a:a[0],n):t||a.join(",")}}))}}}]);
//# sourceMappingURL=830.243c8c17.chunk.js.map