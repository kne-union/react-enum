"use strict";(self.webpackChunk_kne_components_react_enum=self.webpackChunk_kne_components_react_enum||[]).push([[830],{71830:(e,r,a)=>{a.r(r),a.d(r,{Enum:()=>S,EnumResource:()=>C,default:()=>R,preset:()=>N,useEnum:()=>M,useEnumLoader:()=>x,useEnumResource:()=>$});var t=a(94922),n=a.n(t),o=a(74946),s=a(78678),u=a(16052),c=a.n(u),l=a(12097),m=a.n(l),i=a(34598),f=a.n(i),d=a(9211),g=a.n(d),y=a(58554),p=a(64755),h=a.n(p);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},b.apply(null,arguments)}function v(e,r){if(null==e)return{};var a={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.includes(t))continue;a[t]=e[t]}return a}const A={base:{},cache:{max:100}};let O=new y.q(A.cache);const N=e=>{h()(A,e),O=new y.q(A.cache)},q=()=>O,w=["moduleName","children","format"],j=["moduleName","name","format","force","children"],E=["data"],_=["request","children"],k=["data"],P=e=>{let{value:r,format:a,language:t}=e;var n;const o=(null==(n=r.locale)?void 0:n[t])||r.description;return"origin"===a?r:"option"===a?Object.assign({},r,{label:o}):o},$=()=>{const{enums:e}=(0,o.usePreset)();return(0,s.A)((async r=>{let{moduleNames:a}=r;return await Promise.all(a.map((async r=>{const a=Object.assign({},A.base,e)[r];if(!a)return console.warn(`\u679a\u4e3e[${r}]\u7684loader\u6ca1\u6709\u88ab\u6b63\u786e\u8bbe\u7f6e`),null;const t=await("function"===typeof a?a({target:r}):a);if(Array.isArray(t))return new Map(t.map((e=>[e.value.toString(),e])));if(t instanceof Map)return t;throw new Error("\u83b7\u53d6\u5230\u7684resource\u7c7b\u578b\u4e0d\u6b63\u786e\uff0c\u4ec5\u652f\u6301Array\u6216Map")})))}))},x=()=>{const{language:e}=(0,o.usePreset)(),r=$();return(0,s.A)((async a=>{let{requests:t,format:n}=a;const o=q(),s=e=>Symbol.for(`${e.moduleName}_${e.value}_${e.format||n}`),u=m()(t,(e=>!e.force&&o.has(s(e))?"cached":"uncached")),c=u.uncached||[],l=u.cached||[],i=[],d=f()(c.map((e=>{let{moduleName:r}=e;return r}))),y=g()(await r({moduleNames:d}),((e,r,a)=>{e[d[a]]=r}),{});return l.forEach((e=>{const r=o.get(s(e)),a=t.indexOf(e);i[a]=r})),c.forEach((r=>{const a=(r=>{if(o.has(s(r)))return o.get(s(r));const a=y[r.moduleName].get(r.value),t=P({value:a,format:r.format||n,language:e});return o.set(s(r),t),t})(r),u=t.indexOf(r);i[u]=a})),i}))},M=()=>{const e=x();return(0,u.useFetch)({loader:r=>{let{data:a}=r;const{requests:t,format:n}=Object.assign({},{format:"default"},a);return e({requests:t,format:n})}})},C=e=>{const r=Object.assign({},{format:"origin"},e),{moduleName:a,children:t,format:s}=r,u=v(r,w),l=$(),{language:m}=(0,o.usePreset)();return n().createElement(c(),b({},u,{data:{moduleName:a},loader:e=>{let{data:r}=e;const{moduleName:a}=Object.assign({},r);return l({moduleNames:Array.isArray(a)?a:[a]})},render:e=>{let{data:r}=e;return"function"===typeof t?t(Array.isArray(a)?r.map((e=>Array.from(e.values()).map((e=>P({value:e,format:s,language:m}))))):Array.from(r[0].values()).map((e=>P({value:e,format:s,language:m})))):t}}))},R=e=>{const r=Object.assign({},{force:!1},e),{moduleName:a,name:t,format:o,force:s,children:u}=r,l=v(r,j),m=x();return t?n().createElement(c(),b({},l,{loader:e=>{let{data:r}=e;const{requests:a,format:t}=Object.assign({},r);return m({requests:a,format:t})},data:{requests:[{moduleName:a,value:t,force:s,format:"function"===typeof u?"origin":o||"default"}]},render:e=>{let{data:r}=e,t=v(e,E);return"function"===typeof u?u(Array.isArray(a)?r:r[0],t):u||r}})):n().createElement(C,{moduleName:a,format:o||"origin"},u)},S=e=>{const r=Object.assign({},{format:"default"},e),{request:a,children:t}=r,o=v(r,_),s=x();return n().createElement(c(),b({},o,{loader:e=>{let{data:r}=e;const{requests:a,format:t}=Object.assign({},r);return s({requests:a,format:t})},data:{requests:Array.isArray(a)?a:[a]},render:e=>{let{data:r}=e,n=v(e,k);return"function"===typeof t?t(Array.isArray(a)?r:r[0],n):t||r.join(",")}}))}}}]);
//# sourceMappingURL=830.59c9659a.chunk.js.map