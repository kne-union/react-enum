"use strict";(self.webpackChunk_kne_components_react_enum=self.webpackChunk_kne_components_react_enum||[]).push([[830],{71830:(e,a,r)=>{r.r(a),r.d(a,{Enum:()=>S,EnumResource:()=>C,default:()=>R,preset:()=>N,useEnum:()=>M,useEnumLoader:()=>x,useEnumResource:()=>$});var t=r(94922),n=r.n(t),o=r(74946),u=r(78678),s=r(16052),l=r.n(s),c=r(12097),m=r.n(c),i=r(34598),f=r.n(i),d=r(9211),g=r.n(d),y=r(58554),p=r(64755),h=r.n(p);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},b.apply(null,arguments)}function v(e,a){if(null==e)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.includes(t))continue;r[t]=e[t]}return r}const A={base:{},cache:{max:100}};let O=new y.q(A.cache);const N=e=>{h()(A,e),O=new y.q(A.cache)},q=()=>O,w=["moduleName","children","format"],j=["moduleName","name","format","force","children"],E=["data"],_=["request","children"],k=["data"],P=e=>{let{value:a,format:r,language:t,locale:n}=e;var o;const u=(null==(o=a.translation)?void 0:o[t||n])||a.description;return"origin"===r?a:"option"===r?Object.assign({},a,{label:u}):u},$=()=>{const{enums:e,locale:a,language:r}=(0,o.usePreset)();return(0,u.A)((async t=>{let{moduleNames:n}=t;return await Promise.all(n.map((async t=>{const n=Object.assign({},A.base,e)[t];if(!n)return console.warn(`\u679a\u4e3e[${t}]\u7684loader\u6ca1\u6709\u88ab\u6b63\u786e\u8bbe\u7f6e`),null;const o=await("function"===typeof n?n({target:t,locale:a,language:r}):n);if(Array.isArray(o))return new Map(o.map((e=>[e.value.toString(),e])));if(o instanceof Map)return o;throw new Error("\u83b7\u53d6\u5230\u7684resource\u7c7b\u578b\u4e0d\u6b63\u786e\uff0c\u4ec5\u652f\u6301Array\u6216Map")})))}))},x=()=>{const{language:e,locale:a}=(0,o.usePreset)(),r=$();return(0,u.A)((async t=>{let{requests:n,format:o}=t;const u=q(),s=e=>Symbol.for(`${e.moduleName}_${e.value}_${e.format||o}`),l=m()(n,(e=>!e.force&&u.has(s(e))?"cached":"uncached")),c=l.uncached||[],i=l.cached||[],d=[],y=f()(c.map((e=>{let{moduleName:a}=e;return a}))),p=g()(await r({moduleNames:y}),((e,a,r)=>{e[y[r]]=a}),{});return i.forEach((e=>{const a=u.get(s(e)),r=n.indexOf(e);d[r]=a})),c.forEach((r=>{const t=(r=>{if(u.has(s(r)))return u.get(s(r));const t=p[r.moduleName].get(r.value),n=P({value:t,format:r.format||o,language:e,locale:a});return u.set(s(r),n),n})(r),l=n.indexOf(r);d[l]=t})),d}))},M=()=>{const e=x();return(0,s.useFetch)({loader:a=>{let{data:r}=a;const{requests:t,format:n}=Object.assign({},{format:"default"},r);return e({requests:t,format:n})}})},C=e=>{const a=Object.assign({},{format:"origin"},e),{moduleName:r,children:t,format:u}=a,s=v(a,w),c=$(),{language:m,locale:i}=(0,o.usePreset)();return n().createElement(l(),b({},s,{data:{moduleName:r},loader:e=>{let{data:a}=e;const{moduleName:r}=Object.assign({},a);return c({moduleNames:Array.isArray(r)?r:[r]})},render:e=>{let{data:a}=e;return"function"===typeof t?t(Array.isArray(r)?a.map((e=>Array.from(e.values()).map((e=>P({value:e,format:u,language:m,locale:i}))))):Array.from(a[0].values()).map((e=>P({value:e,format:u,language:m,locale:i})))):t}}))},R=e=>{const a=Object.assign({},{force:!1},e),{moduleName:r,name:t,format:o,force:u,children:s}=a,c=v(a,j),m=x();return t?n().createElement(l(),b({},c,{loader:e=>{let{data:a}=e;const{requests:r,format:t}=Object.assign({},a);return m({requests:r,format:t})},data:{requests:[{moduleName:r,value:t,force:u,format:"function"===typeof s?"origin":o||"default"}]},render:e=>{let{data:a}=e,t=v(e,E);return"function"===typeof s?s(Array.isArray(r)?a:a[0],t):s||a}})):n().createElement(C,{moduleName:r,format:o||"origin"},s)},S=e=>{const a=Object.assign({},{format:"default"},e),{request:r,children:t}=a,o=v(a,_),u=x();return n().createElement(l(),b({},o,{loader:e=>{let{data:a}=e;const{requests:r,format:t}=Object.assign({},a);return u({requests:r,format:t})},data:{requests:Array.isArray(r)?r:[r]},render:e=>{let{data:a}=e,n=v(e,k);return"function"===typeof t?t(Array.isArray(r)?a:a[0],n):t||a.join(",")}}))}}}]);
//# sourceMappingURL=830.dceb1c1f.chunk.js.map