"use strict";(self.webpackChunk_kne_components_react_enum=self.webpackChunk_kne_components_react_enum||[]).push([[830],{71830(e,a,r){r.r(a),r.d(a,{Enum:()=>R,EnumResource:()=>M,default:()=>S,preset:()=>N,useEnumLoader:()=>G,useEnumResource:()=>P});var n=r(94922),t=r.n(n),o=r(74946),l=r(78678),u=r(16052),c=r.n(u),s=r(12097),i=r.n(s),m=r(34598),f=r.n(m),g=r(9211),d=r.n(g),p=r(16094),h=r(64755),y=r.n(h),b=r(67823);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}function w(e,a){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==a.indexOf(n))continue;r[n]=e[n]}return r}const A={base:{},cache:{max:100}};let O=new p.q(A.cache);const N=e=>{y()(A,e),O=new p.q(A.cache)},E=()=>O,j=["moduleName","children","format"],q=["moduleName","name","format","force","children","placeholder"],_=["data"],x=["request","children","placeholder"],k=["data"],C=e=>{let{value:a,format:r,language:n,locale:t}=e;var o;if(!a)return"";const l=(null==(o=a.translation)?void 0:o[n||t])||a.description;return"origin"===r?a:"option"===r?Object.assign({},a,{label:l}):l},P=()=>{const{enums:e}=(0,o.usePreset)();return(0,l.A)(async a=>{let{moduleNames:r,language:n}=a;return await Promise.all(r.map(async a=>{const r=Object.assign({},A.base,e)[a];if(!r)return console.warn("\u679a\u4e3e[".concat(a,"]\u7684loader\u6ca1\u6709\u88ab\u6b63\u786e\u8bbe\u7f6e")),null;const t=await("function"===typeof r?r({target:a,language:n,locale:n}):r);if(Array.isArray(t))return new Map(t.map(e=>[String(e.value),e]));if(t instanceof Map)return t;throw new Error("\u83b7\u53d6\u5230\u7684resource\u7c7b\u578b\u4e0d\u6b63\u786e\uff0c\u4ec5\u652f\u6301Array\u6216Map")}))})},G=()=>{const e=P();return(0,l.A)(async a=>{let{requests:r,format:n,language:t,placeholder:o}=a;const l=E(),u=e=>Symbol.for("".concat(e.moduleName,"_").concat(e.value,"_").concat(t,"_").concat(e.format||n)),c=i()(r,e=>!e.force&&l.has(u(e))?"cached":"uncached"),s=c.uncached||[],m=c.cached||[],g=[],p=f()(s.map(e=>{let{moduleName:a}=e;return a})),h=d()(await e({moduleNames:p,language:t}),(e,a,r)=>{e[p[r]]=a},{});return m.forEach(e=>{const a=l.get(u(e)),n=r.indexOf(e);g[n]=a}),s.forEach(e=>{const a=(e=>{if(l.has(u(e)))return l.get(u(e));const a=h[e.moduleName];if(!a)return o;const r=a.get(String(e.value));if(!r)return o;const c=C({value:r,format:e.format||n,language:t});return c&&l.set(u(e),c),c})(e),c=r.indexOf(e);g[c]=a}),g})},M=e=>{const a=Object.assign({},{format:"origin"},e),{moduleName:r,children:n,format:l}=a,u=w(a,j),s=P(),{language:i,locale:m}=(0,o.useGlobalContext)();return t().createElement(c(),v({},u,{data:{moduleName:r},loader:e=>{let{data:a}=e;const{moduleName:r}=Object.assign({},a);return s({moduleNames:Array.isArray(r)?r:[r],language:i||m})},render:e=>{let{data:a}=e;return"function"===typeof n?n(Array.isArray(r)?a.map(e=>Array.from(e.values()).map(e=>C({value:e,format:l,language:i,locale:m}))):Array.from(a[0].values()).map(e=>C({value:e,format:l,language:i,locale:m}))):n}}))},S=e=>{const a=Object.assign({},{force:!1},e),{moduleName:r,name:n,format:l,force:u,children:s,placeholder:i}=a,m=w(a,q),{language:f,locale:g}=(0,o.useGlobalContext)(),d=G();return(0,b.isEmpty)(n)?t().createElement(M,{moduleName:r,format:l||"origin"},s):t().createElement(c(),v({},m,{loader:e=>{let{data:a}=e;const{requests:r,language:n,format:t}=Object.assign({},a);return d({requests:r,language:n,format:t,placeholder:i})},data:{requests:[{moduleName:r,value:n,force:u,format:"function"===typeof s?"origin":l||"default"}],language:f||g||window.navigator.language},render:e=>{let{data:a}=e,n=w(e,_);const t=Array.isArray(r)?a:a[0];return"function"===typeof s?s(t,n):s||t}}))},R=e=>{const a=Object.assign({},{format:"default"},e),{request:r,children:n,placeholder:l}=a,u=w(a,x),{language:s,locale:i}=(0,o.useGlobalContext)(),m=G();return t().createElement(c(),v({},u,{loader:e=>{let{data:a}=e;const{requests:r,format:n,language:t}=Object.assign({},a);return m({requests:r,language:t,format:n,placeholder:l})},data:{requests:Array.isArray(r)?r:[r],language:s||i||window.navigator.language},render:e=>{let{data:a}=e,t=w(e,k);return"function"===typeof n?n(Array.isArray(r)?a:a[0],t):n||a.join(",")}}))}}}]);
//# sourceMappingURL=830.3e8ae1f5.chunk.js.map